var niubi=function(){for(var l=$("#box"),t=$('<div class="notepad-menubar"></div>'),c=$('<ul class="menu-title"></ul>'),d=[$('<ul class="menus"></ul>'),$('<ul class="menus" style="left: 54px;"></ul>'),$('<ul class="menus" style="left: 108px;"></ul>'),$('<ul class="menus" style="left: 162px;"></ul>'),$('<ul class="menus" style="left: 216px;"></ul>')],r=-1,e=0;e<d.length;e++)d[e].css({display:"none"});!function(l){for(var t=0;t<l.length;t++){var e=$('<li class="title"></li>');e.html(l[t].title),e.attr("data-id",t),c.append(e),e.click(function(){var l=Number(this.dataset.id);console.log(r);for(var t=0;t<d.length;t++)d[t].css({display:"none"}),d[l].css({display:"inline-block"});r=(-1===r?d[l].css({display:"inline-block"}):d[r].css({display:"none"}),l)})}for(t=0;t<l.length;t++)for(var i=l[t].menuItems,n=d[t],s=0;s<i.length;s++)if("hr"!==i[s].title){var a=$('<li class="menu-item"></li>');a.html(i[s].title),a.attr("data-x",t),a.attr("data-y",s),n.append(a)}else{var o=$('<li class="menu-hr"></li>');n.append(o)}}(menuData),t.append(c),t.append(d),l.append(t)},menuData=[{title:"文件(F)",menuItems:[{title:"新建(N)",shortcut:"Ctrl+N",enabled:!0,handler:function(){console.log("新建(N) menu clicked!")}},{title:"打开(O)...",shortcut:"Ctrl+O",enabled:!0,handler:function(){console.log("打开(O) menu clicked!")}},{title:"保存(S)",shortcut:"Ctrl+S",enabled:!0,handler:function(){console.log("保存(S) menu clicked!")}},{title:"另存为(A)...",shortcut:"",enabled:!0,handler:function(){console.log("另存为(A) menu clicked!")}},{title:"hr",shortcut:"",enabled:!0,handler:null},{title:"页面设置(U)...",shortcut:"",enabled:!0,handler:function(){console.log("页面设置(U) menu clicked!")}},{title:"打印(P)...",shortcut:"Ctrl+P",enabled:!0,handler:function(){console.log("打印(P) menu clicked!")}},{title:"hr",shortcut:"",enabled:!0,handler:null},{title:"退出(X)",shortcut:"",enabled:!0,handler:function(){console.log("退出(X) menu clicked!")}}],width:"202px",left:"0px"},{title:"编辑(E)",menuItems:[{title:"撤销(U)",shortcut:"Ctrl+Z",enabled:!1,handler:function(){console.log("撤销(U) menu clicked!")}},{title:"hr",shortcut:"",enabled:!0,handler:null},{title:"剪切(T)",shortcut:"Ctrl+X",enabled:!0,handler:function(){console.log("剪切(X) menu clicked!")}},{title:"复制(C)",shortcut:"Ctrl+C",enabled:!1,handler:function(){console.log("复制(C) menu clicked!")}},{title:"粘贴(P)",shortcut:"Ctrl+V",enabled:!1,handler:function(){console.log("粘贴(P) menu clicked!")}},{title:"删除(L)",shortcut:"Del",enabled:!1,handler:function(){console.log("删除(L) menu clicked!")}},{title:"hr",shortcut:"",enabled:!0,handler:null},{title:"使用 Bing 搜索...",shortcut:"Ctrl+E",enabled:!0,handler:function(){$editor.bingSearch()}},{title:"查找(F)...",shortcut:"Ctrl+F",enabled:!1,handler:function(){$dlgSearch.show(function(l){$editor.search(l)})}},{title:"查找下一个(N)",shortcut:"F3",enabled:!1,handler:function(){console.log("查找下一个(N) menu clicked!")}},{title:"替换(R)...",shortcut:"Ctrl+H",enabled:!0,handler:function(){$dlgReplace.show({searchHandler:function(l){$editor.search(l)},replaceHandler:function(l){$editor.replace(l)},replaceAllHandler:function(l){$editor.replaceAll(l)}})}},{title:"转到(G)...",shortcut:"Ctrl+G",enabled:!0,handler:function(){$dlgGoto.show({lineNum:$editor.getRow(),totalLine:$editor.getTotalLn(),gotoHandler:function(l){$editor.gotoLn(l)}})}},{title:"hr",shortcut:"",enabled:!0,handler:null},{title:"全选(A)",shortcut:"Ctrl+A",enabled:!0,handler:function(){$editor.selectAll()}},{title:"时间/日期(D)",shortcut:"F5",enabled:!0,handler:function(){$editor.insertDataTime()}}],width:"218px",left:"52px"},{title:"格式(O)",menuItems:[{title:"自动换行(W)",shortcut:"",enabled:!0,handler:function(){np.bWrap=!np.bWrap,np.bWrap?($statusBar.display(!1),$editor.resize(!1),$menubar.enabled(3,0,!1),$menubar.enabled(1,9,!1)):($statusBar.display(np.bShowStatusBar),$editor.resize(np.bShowStatusBar),$menubar.enabled(3,0,!0),$menubar.enabled(1,9,!0),$menubar.checked(3,0,np.bShowStatusBar)),$menubar.checked(2,0,np.bWrap),$editor.setWrap(np.bWrap)}},{title:"字体(F)...",shortcut:"",enabled:!0,handler:function(){$dlgFont.show({family:np.fontFamily,style:np.fontStyle,size:np.fontSize,okHandler:np.fontHandler})}}],width:"156px",left:"106px"},{title:"查看(V)",menuItems:[{title:"状态栏(S)",shortcut:"",enabled:!0,handler:function(){np.bShowStatusBar=!np.bShowStatusBar,$statusBar.display(np.bShowStatusBar),$menubar.checked(3,0,np.bShowStatusBar),$editor.resize(np.bShowStatusBar)}}],width:"138px",left:"162px"},{title:"帮助(H)",menuItems:[{title:"查看帮助(H)",shortcut:"",enabled:!0,handler:function(){window.open("https://cn.bing.com/search?q=获取有关+windows+10+中的记事本的帮助","_blank")}},{title:"关于记事本(A)",shortcut:"",enabled:!0,handler:function(){$dlgAbout.show()}}],width:"166px",left:"216px"}],font=function(){$("#box").append('<div id="font" style="display: none;" class="notepad-dlg-mask notepad-dlg-font"><div class="dialogbox notepad-dlgbox ui-draggable"><div class="notepad-dlg-titlebar ui-draggable-handle"><p class="title">字体</p><span class="close-btn" title="关闭">✖</span></div><div class="main notepad-dlg-main"><div class="font-family"><p>字体(F):</p><div class="notepad-com-list" style="width: 176px;"><input id="family" class="editor" type="text" value="Agency FB"><br><ul class="list fa"><li class="item selected" style="font-family: "Agency FB";">Agency FB</li><li class="item" style="font-family: "Algerian";">Algerian</li><li class="item" style="font-family: "Arial";">Arial</li><li class="item" style="font-family: "Arial Rounded MT";">Arial Rounded MT</li><li class="item" style="font-family: "Axure Handwriting";">Axure Handwriting</li><li class="item" style="font-family: "Bahnschrift";">Bahnschrift</li><li class="item" style="font-family: "Baskerville Old Face";">Baskerville Old Face</li><li class="item" style="font-family: "微软雅黑";">微软雅黑</li><li class="item" style="font-family: "楷体";">楷体</li></ul></div></div><div class="font-style"><p>字形(Y):</p><div class="notepad-com-list" style="width: 132px;"><input id="shape" class="editor" type="text" value="常规"><br><ul class="list st"><li class="item selected">常规</li><li class="item" style="font-style: italic;">斜体</li><li class="item" style="font-weight: blod;">粗体</li><li class="item" style="font-weight: blod; font-style: italic;">粗偏斜体</li></ul></div></div><div class="font-size"><p>大小(S):</p><div class="notepad-com-list" style="width: 64px;"><input id="size" class="editor" type="text" value="16"><br><ul class="list num"><li class="item">8</li><li class="item">9</li><li class="item">10</li><li class="item">11</li><li class="item">12</li><li class="item">13</li><li class="item">14</li><li class="item">15</li><li class="item selected">16</li><li class="item">17</li><li class="item">18</li><li class="item">19</li><li class="item">20</li><li class="item">21</li><li class="item">22</li><li class="item">24</li></ul></div></div><fieldset class="sample"><legend>示例</legend><p class="sample-txt" style="font-family: "Berlin Sans FB"; font-size: 16pt;">AaBbYyZz</p></fieldset><div class="script"><label>"脚本(R):"<br><select><option value="西欧语言">西欧语言</option><option VALUE="中文 GB2312">中文 GB2312</option></select></label></div><input class="btn-ok btn" type="button" value="确定"><input class="btn-cancel btn" type="button" value="取消"></div></div></div>');var l=$("#font"),t=$(".close-btn"),e=($(".btn-ok"),$(".btn-cancel")),i=$("#size"),n=$("#shape"),s=$("#family");$(".num").on("click","li",function(){$(".num li").removeClass("selected"),$(this).addClass("selected"),console.log($(this).text()),i.val($(this).text())}),$(".fa").on("click","li",function(){$(".fa li").removeClass("selected"),$(this).addClass("selected"),s.val($(this).text())}),$(".st").on("click","li",function(){$(".st li").removeClass("selected"),$(this).addClass("selected"),n.val($(this).text())}),t.click(function(){l.css({display:"none"})}),e.click(function(){l.css({display:"none"})})},editor=function(){$("#box").append('<div class="notepad-editor" style="bottom: 0px;"><textarea spellcheck="false" auto-size="none" wrap="soft" style="overflow-x: hidden; font-family: Arial; font-size: 20pt; font-weight: none;"></textarea></div>')},app=function(){var l=$("ul").find('li[data-x="2"]'),t=$("#font"),e=$(".menus"),i=$("#family"),n=$("#size"),s=$(".btn-ok"),a=$("#shape");l.click(function(){t.css({display:"inline-block"}),e.css({display:"none"})}),s.click(function(){switch(console.log(a.val()),console.log($("textarea").css("font-family")),a.val()){case"常规":$("textarea").css({"font-family":i.val(),"font-size":n.val()+"pt","font-weight":"100","font-style":"normal"});break;case"粗体":$("textarea").css({"font-family":i.val(),"font-size":n.val()+"pt","font-weight":"600","font-style":"normal"});break;case"斜体":$("textarea").css({"font-family":i.val(),"font-size":n.val()+"pt","font-style":"italic","font-weight":"100"});break;default:$("textarea").css({"font-family":i.val(),"font-size":n.val()+"pt","font-style":"italic","font-weight":"600"})}t.css({display:"none"})})};$(function(){niubi(),font(),editor(),app()});